# Render Environment Variables Setup Guide

This guide helps you sync all environment variables from your local `.env` file to your Render deployment.

## Required Environment Variables

These variables **must** be set in Render for the app to function:

### 1. `ANTHROPIC_API_KEY` ⚠️ REQUIRED
- **Purpose**: Used for AI idea generation, research, and enrichment
- **How to set**: 
  1. Go to your Render dashboard: https://dashboard.render.com
  2. Navigate to your `iotd-reskin` service
  3. Click on "Environment" tab
  4. Click "Add Environment Variable"
  5. Key: `ANTHROPIC_API_KEY`
  6. Value: Copy from your local `.env` file
  7. Click "Save Changes"

### 2. `DATABASE_URL` ✅ Already Configured
- **Purpose**: PostgreSQL database connection string
- **Status**: Automatically set from the `iotd-db` database in `render.yaml`
- **Action**: No action needed

### 3. `SESSION_SECRET` ✅ Already Configured
- **Purpose**: Secret key for encrypting user sessions
- **Status**: Automatically generated by Render
- **Action**: No action needed

### 4. `NODE_ENV` ✅ Already Configured
- **Purpose**: Sets the environment to production
- **Status**: Set to `production` in `render.yaml`
- **Action**: No action needed

## Optional Environment Variables

These variables enhance functionality but are not strictly required:

### 5. `OPENAI_API_KEY` (Optional)
- **Purpose**: Used for some AI features (DALL-E image generation, fallback AI)
- **How to set**: Same process as `ANTHROPIC_API_KEY` above
- **Note**: The app primarily uses Anthropic, but OpenAI can be used as fallback

### 6. `SERPAPI_API_KEY` (Optional)
- **Purpose**: Used for Google Images search when generating idea images
- **How to set**: Same process as `ANTHROPIC_API_KEY` above
- **Note**: Without this, image search will skip Google Images and use Unsplash/DALL-E

### 7. `UNSPLASH_ACCESS_KEY` (Optional)
- **Purpose**: Used for Unsplash stock photo search when generating idea images
- **How to set**: Same process as `ANTHROPIC_API_KEY` above
- **Note**: Without this, image search will skip Unsplash and use Google Images/DALL-E

## Quick Setup Steps

1. **Get your local environment variables:**
   ```bash
   # View your .env file (don't commit this!)
   cat .env
   ```

2. **Copy each value** from your `.env` file

3. **Add to Render:**
   - Go to: https://dashboard.render.com
   - Select your `iotd-reskin` service
   - Click "Environment" tab
   - Add each variable one by one
   - Click "Save Changes" after each addition

4. **Redeploy** (Render will auto-redeploy when you save environment variables)

## Verification

After setting environment variables, verify they're working:

1. Check Render logs for startup messages
2. Look for: `✓ ANTHROPIC_API_KEY is set` in logs
3. Test AI generation feature in the app
4. Check `/api/health` endpoint returns 200

## Current Status

Based on `render.yaml`:
- ✅ `DATABASE_URL` - Auto-configured from database
- ✅ `SESSION_SECRET` - Auto-generated
- ✅ `NODE_ENV` - Set to `production`
- ⚠️ `ANTHROPIC_API_KEY` - **NEEDS MANUAL SETUP**
- ⚠️ `OPENAI_API_KEY` - Optional, needs manual setup if used
- ⚠️ `SERPAPI_API_KEY` - Optional, needs manual setup if used
- ⚠️ `UNSPLASH_ACCESS_KEY` - Optional, needs manual setup if used

## Notes

- Environment variables set in Render dashboard override `render.yaml` values
- Never commit `.env` file to git (it's in `.gitignore`)
- Render automatically redeploys when environment variables change
- Use Render's "Environment" tab to manage all variables in one place

